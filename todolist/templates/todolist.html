{% extends 'base.html' %}

{% block meta %}
<title>Todolist</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<style>
    .card:hover {
        transform: scale(1.05);
      }
</style>

{% endblock meta %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>

<nav class="navbar navbar-light px-4 mb-3" style="background-color: #e3f2fd;">
    <span class="navbar-text mb-0 h5">Signed in as {{user.username}}</span>
    <span class="navbar-brand mb-0 h1">Todolist</span>
    <div class="btn-group" role="group">
        <form method="post" action="{% url "todolist:add_task" %}" >
            {% csrf_token %}
            <button class="btn btn-primary me-3 navbar-btn" type="submit" name="create-task">
                Add Task
            </button>
        </form>
        <form action="{% url 'todolist:logout' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-danger navbar-btn">Logout</button>
        </form>
    </div>
</nav>

<div class="container">
    <div class="row justify-content-around">
    {% for task in list_task %}
            <div class="card mb-5 col-lg-5">
                <div class="card-header">
                    {% if task.is_finished %}
                        <th>Done</th>
                    {% else %}
                        <th>In Progress</th>
                    {% endif %}
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{task.title}}</h5>
                    <p class="card-text">{{task.description}}</p>
                    <div class="btn-group float-end" role="group">
                        <form method="post" action="{% url "todolist:toggle-task" task.id %}" >
                            {% csrf_token %}
                            <button class="btn btn-secondary btn-sm me-3" type="submit" name="toggle_done">
                                {% if task.is_finished %} Mark Not Done {% else %} Mark Done {% endif %}
                            </button>
                        </form>
                        <form method="post" action="{% url "todolist:delete-task" task.id %}" >
                            {% csrf_token %}
                            <button class="btn btn-danger btn-sm" type="submit" name="toggle_done">
                                Delete
                            </button>
                        </form>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    {{task.date}}
                </div>
            </div>
        {% if forloop.counter|divisibleby:2 %}
            <div class="w-100"></div>
        {% elif forloop.last%}
            <div class="col-lg-5"></div> 
        {% endif %}
    {% endfor %}
    </div>



{% comment %} <table>
    <tr>
    <th>Tanggal Dibuat</th>
    <th>Judul</th>
    <th>Deskripsi</th>
    <th>Status</th>
    <th>Actions</th>
    </tr>
    Tambahkan data di bawah baris ini
    {% for task in list_task %}
    <tr>
        <th>{{task.date}}</th>
        <th>{{task.title}}</th>
        <th>{{task.description}}</th>
        {% if task.is_finished %}
            <th>Done</th>
        {% else %}
            <th>In Progress</th>
        {% endif %}
        <th>
            <form method="post" action="{% url "todolist:toggle-task" task.id %}" >
                {% csrf_token %}
                <button class="btn btn-info btn-sm" type="submit" name="toggle_done">
                    {% if task.is_finished %} Mark Not Done {% else %} Mark Done {% endif %}
                </button>
            </form>
            <form method="post" action="{% url "todolist:delete-task" task.id %}" >
                {% csrf_token %}
                <button class="btn btn-info btn-sm" type="submit" name="toggle_done">
                    Delete
                </button>
            </form>
        </th>
    </tr>
    {% endfor %}
</table> {% endcomment %}
    <h5>Sesi terakhir login: {{ last_login }}</h5>
</div>

{% endblock content %}